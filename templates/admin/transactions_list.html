{% extends "admin/base.html" %} {% block content %}
<div class="page-title">Транзакции</div>
<div class="card">
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Пользователь</th>
        <th>Тип</th>
        <th>Подкаст</th>
        <th>Статус</th>
        <th>Дата</th>
      </tr>
    </thead>
    <tbody>
      {% for it in items %}
      <tr>
        <td>{{ it.id }}</td>
        <td>{{ it.user.telegram_id if it.user else '' }}</td>
        <td>{{ it.type }}</td>
        <td>{{ it.podcast.title if it.podcast else '' }}</td>
        <td>
          {% if it.status == 'success' %}
          <span class="badge success">success</span>
          {% elif it.status == 'failed' %}
          <span class="badge danger">failed</span>
          {% else %}
          <span class="badge muted">{{ it.status }}</span>
          {% endif %}
        </td>
        <td>
          {{ it.created_at.strftime('%Y-%m-%d %H:%M') if it.created_at else ''
          }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
